function hasClass(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function addClass(e,t){e.classList?e.classList.add(t):hasClass(e,t)||(e.className+=" "+t)}function removeClass(e,t){if(e.classList)e.classList.remove(t);else if(hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function rewriteExtension(e,t,n){var o=e.indexOf(t);return o>-1&&e.slice(0,o)+n}function drawImageProp(e,t,n,o,i,a,s,r){2===arguments.length&&(n=o=0,i=e.canvas.width,a=e.canvas.height),s="number"==typeof s?s:.5,r="number"==typeof r?r:.5,s<0&&(s=0),r<0&&(r=0),s>1&&(s=1),r>1&&(r=1);var l,c,d,u,f=t.width,h=t.height,v=Math.min(i/f,a/h),m=f*v,p=h*v,g=1;m<i&&(g=i/m),p<a&&(g=a/p),m*=g,p*=g,d=f/(m/i),u=h/(p/a),l=(f-d)*s,c=(h-u)*r,l<0&&(l=0),c<0&&(c=0),d>f&&(d=f),u>h&&(u=h),e.drawImage(t,l,c,d,u,n,o,i,a)}function grayscaleImg(e,t,n){for(var o=e.getImageData(0,0,t,n),i=o.data,a=0;a<i.length;a+=4){var s=.3*i[a]+.59*i[a+1]+.11*i[a+2];i[a]=s,i[a+1]=s,i[a+2]=s}e.putImageData(o,0,0)}function tintImage(e,t,n,o,i,a){for(var s=e.getImageData(0,0,t,n),r=s.data,l=0;l<r.length;l+=4)r[l]=o*r[l]/255,r[l+1]=i*r[l+1]/255,r[l+2]=a*r[l+2]/255;e.putImageData(s,0,0)}function canvasClone(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.id=e.id+"-color",t.className="canvas-color",t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),t}function canvasDimension(e,t,n){var o;switch(t){case"height":return o=n/e[0],Math.floor(o*e[1]);case"width":return o=n/e[1],Math.floor(o*e[0]);default:return 300}}function buildModal(e,t,n){var o=_modalProperties(),i='<div id="modal" class="'+n+" "+t+'" tabindex="0"><div class="wrapper">\t\n\t<div class="controls" tabindex="-1" role="button" aria-label="Close"><div class="icon" ></div></div>\n\t<div class="info quadrant-'+e.text.quadrant+" "+e.text.color+'"><section><h2>'+e.name+"</h2><h3>"+e.title+"</h3>\n\t<p>"+e.summary+"</p></section>\n\t</div></div></div>";$("body").append(i),layoutControl.selectorState(!1),"mobile"==t?($("#modal").css({left:o.left,top:o.top,width:o.width}),_mobileImage(e.image)):($("#modal").css({left:o.left,top:o.top,height:o.height,width:o.width}),_desktopImage(e.image)),_modalEvents(t,n)}function _desktopImage(e){if("undefined"!=typeof e){var t=$(window).width(),n=$(window).height(),o=document.createElement("canvas"),i=o.getContext("2d");o.width=t,o.height=n,o.id="backcanvas";var a=new Image;a.onload=function(){if(drawImageProp(i,a,0,0,t,n),$("body").prepend(o),"Safari"==bowser.name&&"5.1"==bowser.version){var e=canvasClone(o);vignetteImage(e)}else vignetteImage(o);tintImage(i,t,n,239,65,54)},a.src=e}}function vignetteImage(e){var t=document.createElement("canvas"),n=t.getContext("2d"),o=$("#modal .wrapper").offset(),i=o.left,a=o.top,s=$("#modal").width(),r=$("#modal").height();t.id="vignette",t.width=s,t.height=r,n.drawImage(e,i,a,s,r,0,0,s,r),$("#modal .wrapper").append(t)}function _mobileImage(e){if("undefined"!=typeof e){var t=document.createElement("canvas"),n=t.getContext("2d"),o=new Image,i=_readFileName(e),a=$("#modal .wrapper").width(),s=canvasDimension(i,"height",a);t.width=a,t.height=s,t.id="mobilecanvas",o.onload=function(){n.drawImage(o,0,0,a,s)},o.src=e,$("#modal .wrapper").prepend(t)}}function _modalProperties(){var e=$("main > .wrapper").offset(),t=$("header").height();return{top:t,left:e.left,width:$(window).width()-2*e.left,height:$(window).height()-$("header").height()}}function _modalEvents(e,t){var n=document.getElementById("modal"),o=n.querySelector(".controls");keyFocus("#modal");o.addEventListener("keydown",function(e){" "!=e.key&&"Enter"!=e.key||(e.preventDefault(),layoutControl.selectorState(!0))},!1),o.addEventListener("click",function(e){layoutControl.selectorState(!0)},!1),"desktop"==e&&setTimeout(function(){var e=n.querySelector(".info");addClass(e,"expand")},300)}function buildSelector(e,t){var n=document.querySelector("#selector");if(null!=n){var o=n.parentNode;o.removeChild(n)}for(var i='<div id="selector" tabindex="0"><div class="wrapper">',a=0;a<e.length;a++)i+='<div class="option" tabindex="-1" role="button" aria-label="View"><canvas id="canvas-'+a+'" data-src="'+e[a].image+'"></div>';i+="</div></div>";var s=_selectorProperties(t);$(s.element).prepend(i),$("#selector").height(s.height).width(s.width);var r=$("#selector canvas");$.each(r,function(e,n){var o=$(n).attr("data-src"),i=n.getContext("2d"),a=new Image,r=_readFileName(o),l=_selectorCanvasProperties(r,s,10,t);n.width=l.width,n.height=l.height,a.onload=function(){i.drawImage(a,0,0,l.width,l.height);var e=canvasClone(n);$(n).parent().prepend(e),grayscaleImg(i,l.width,l.height)},a.src=o});for(var l=document.querySelectorAll(".option"),c=0;c<l.length;c++)l[c].addEventListener("keydown",function(n){var o=!1;if(void 0!==n.key)switch(n.key){case" ":case"Spacebar":case"Enter":o=!0;break;default:return}else{if(void 0===n.keyCode)return;switch(n.keyCode){case"32":case"13":o=!0;break;default:return}}if(o===!0){var i=this.querySelector(".canvas-color"),a={targetEl:"canvas",data:e,mode:t,method:"tabbed"};_activateEvent(i,a)}},!0),l[c].addEventListener("mouseup",function(n){var o=this.querySelector(".canvas-color"),i={targetEl:"canvas",data:e,mode:t,method:"clicked"};_activateEvent(o,i)},!0);keyFocus("#selector",!1),dragScroll("#selector","desktop"==t)}function _selectorProperties(e){var t=document.querySelector("#sidebar");return"mobile"==e?{element:"main",width:$(window).width(),height:175}:{element:"#sidebar",width:t.scrollWidth,height:$(window).height()}}function _selectorCanvasProperties(e,t,n,o){var i=10+2*n;return"mobile"==o?{width:canvasDimension(e,"width",t.height-i),height:t.height-i}:{width:t.width-i,height:canvasDimension(e,"height",t.width-i)}}function _readFileName(e){var t=e.split("/"),n=t[4],o=Number(n.substring(0,n.indexOf("x"))),i=Number(n.substring(n.indexOf("x")+1,n.indexOf(".jpg")));return[o,i]}function _activateEvent(e,t){var n=e.tagName.toLowerCase();if(n==t.targetEl){var o=e.id,i=document.querySelector(".option.selected");i&&removeClass(i,"selected");var a=document.getElementById(o).parentNode;addClass(a,"selected");var s=o.indexOf("-")+1,r=o.lastIndexOf("-"),l=Number(o.substring(s,r)),c=t.data,d=c[l];buildModal(d,t.mode,t.method)}}!function(e,t,n){function o(e,t){return typeof e===t}function i(){var e,t,n,i,a,s,r;for(var l in y)if(y.hasOwnProperty(l)){if(e=[],t=y[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=o(t.fn,"function")?t.fn():t.fn,a=0;a<e.length;a++)s=e[a],r=s.split("."),1===r.length?C[r[0]]=i:(!C[r[0]]||C[r[0]]instanceof Boolean||(C[r[0]]=new Boolean(C[r[0]])),C[r[0]][r[1]]=i),w.push((i?"":"no-")+r.join("-"))}}function a(e){var t=S.className,n=C._config.classPrefix||"";if(x&&(t=t.baseVal),C._config.enableJSClass){var o=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(o,"$1"+n+"js$2")}C._config.enableClasses&&(t+=" "+n+e.join(" "+n),x?S.className.baseVal=t:S.className=t)}function s(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):x?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function r(){var e=t.body;return e||(e=s(x?"svg":"body"),e.fake=!0),e}function l(e,n,o,i){var a,l,c,d,u="modernizr",f=s("div"),h=r();if(parseInt(o,10))for(;o--;)c=s("div"),c.id=i?i[o]:u+(o+1),f.appendChild(c);return a=s("style"),a.type="text/css",a.id="s"+u,(h.fake?h:f).appendChild(a),h.appendChild(f),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),f.id=u,h.fake&&(h.style.background="",h.style.overflow="hidden",d=S.style.overflow,S.style.overflow="hidden",S.appendChild(h)),l=n(f,e),h.fake?(h.parentNode.removeChild(h),S.style.overflow=d,S.offsetHeight):f.parentNode.removeChild(f),!!l}function c(e,t){return!!~(""+e).indexOf(t)}function d(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function u(e,t){return function(){return e.apply(t,arguments)}}function f(e,t,n){var i;for(var a in e)if(e[a]in t)return n===!1?e[a]:(i=t[e[a]],o(i,"function")?u(i,n||t):i);return!1}function h(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function v(t,o){var i=t.length;if("CSS"in e&&"supports"in e.CSS){for(;i--;)if(e.CSS.supports(h(t[i]),o))return!0;return!1}if("CSSSupportsRule"in e){for(var a=[];i--;)a.push("("+h(t[i])+":"+o+")");return a=a.join(" or "),l("@supports ("+a+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function m(e,t,i,a){function r(){u&&(delete L.style,delete L.modElem)}if(a=!o(a,"undefined")&&a,!o(i,"undefined")){var l=v(e,i);if(!o(l,"undefined"))return l}for(var u,f,h,m,p,g=["modernizr","tspan","samp"];!L.style&&g.length;)u=!0,L.modElem=s(g.shift()),L.style=L.modElem.style;for(h=e.length,f=0;h>f;f++)if(m=e[f],p=L.style[m],c(m,"-")&&(m=d(m)),L.style[m]!==n){if(a||o(i,"undefined"))return r(),"pfx"!=t||m;try{L.style[m]=i}catch(e){}if(L.style[m]!=p)return r(),"pfx"!=t||m}return r(),!1}function p(e,t,n,i,a){var s=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+_.join(s+" ")+s).split(" ");return o(t,"string")||o(t,"undefined")?m(r,t,i,a):(r=(e+" "+$.join(s+" ")+s).split(" "),f(r,t,n))}function g(e,t,o){return p(e,n,n,t,o)}var w=[],y=[],b={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){y.push({name:e,fn:t,options:n})},addAsyncTest:function(e){y.push({name:null,fn:e})}},C=function(){};C.prototype=b,C=new C;var S=t.documentElement,x="svg"===S.nodeName.toLowerCase(),k=function(){var t=e.matchMedia||e.msMatchMedia;return t?function(e){var n=t(e);return n&&n.matches||!1}:function(t){var n=!1;return l("@media "+t+" { #modernizr { position: absolute; } }",function(t){n="absolute"==(e.getComputedStyle?e.getComputedStyle(t,null):t.currentStyle).position}),n}}();b.mq=k;var E="Moz O ms Webkit",_=b._config.usePrefixes?E.split(" "):[];b._cssomPrefixes=_;var $=b._config.usePrefixes?E.toLowerCase().split(" "):[];b._domPrefixes=$;var I={elem:s("modernizr")};C._q.push(function(){delete I.elem});var L={style:I.elem.style};C._q.unshift(function(){delete L.style}),b.testAllProps=p,b.testAllProps=g,C.addTest("flexbox",g("flexBasis","1px",!0)),i(),a(w),delete b.addTest,delete b.addAsyncTest;for(var q=0;q<C._q.length;q++)C._q[q]();e.Modernizr=C}(window,document),$(function(){!function(){function e(e,t){void 0!==e&&void 0!==t&&$("html").addClass(e+t)}switch(!0){case"Internet Explorer"==bowser.name:e("ie",Math.floor(bowser.version));break;case"Safari"==bowser.name:ver=(1*bowser.version).toString(),e("sf",ver.replace(".","-"));break;case"Chrome"==bowser.name:e("ch",Math.floor(bowser.version));break;case"Opera"==bowser.name:e("op",Math.floor(bowser.version));break;case"Firefox"==bowser.name:e("ff",Math.floor(bowser.version))}}()});var dragScroll=function(e,t){function n(e,t){var n=this;this.el=e,this.vertical=t===!0,this.scrollDir=this.vertical===!1?"scrollLeft":"scrollTop",this.scrolling={dragging:!1,delta:void 0,mouseStart:void 0,objPos:void 0},this.el.addEventListener("mousedown",function(e){return n.scrollStart(e,this)},!0),this.el.addEventListener("mousemove",function(e){return n.scrollSet(e,this)},!0),this.el.addEventListener("mouseup",function(e){return n.scrollStop(e,this)},!0)}var o=document.querySelector(e),i=new n(o,t);return n.prototype.scrollStart=function(e,t){this.scrolling.dragging=!0,this.scrolling.mouseStart=this.vertical===!1?e.clientX:e.clientY,this.scrolling.objPos=t[this.scrollDir]},n.prototype.scrollSet=function(e,t){this.scrolling.delta=this.scrolling.mouseStart-(this.vertical===!1?e.clientX:e.clientY),this.scrolling.dragging===!0&&(t[this.scrollDir]=this.scrolling.objPos+this.scrolling.delta)},n.prototype.scrollStop=function(e,t){this.scrolling.dragging=!1,this.scrolling.mouseStart=this.vertical===!1?e.clientX:e.clientY,this.scrolling.objPos!=t[this.scrollDir]&&e.stopPropagation()},i},keyFocus=function(e,t){function n(e,t){var n=this;this.el=e,this.focusable=e.querySelectorAll('*[tabindex="-1"]'),this.focus_pos=0,this.focus_end=this.focusable.length-1,this.clickEvent=t!==!1,this.tabbed=!1,this.el.addEventListener("focus",function(e){return n.elementFocus(e,this)},!0);for(var o=0;o<=this.focus_end;o++)this.focusable[o].addEventListener("keydown",function(e){return n.childFocus(e,this)},!0)}var o=document.querySelector(e);new n(o,t);n.prototype.elementFocus=function(e,t){var n=this.focusable,o=this.focus_pos;t.addEventListener("keyup",function(e){var t=e.key?e.key:e.keyCode.toString();if("Tab"==t||"9"==t){var i=n[o];i.focus()}},!1)},n.prototype.childFocus=function(e,t){if(!e.defaultPrevented){var n=!1;if(void 0!==e.key)switch(e.key){case"ArrowRight":case"Right":case"ArrowDown":case"Down":this.focus_pos<this.focus_end?this.focus_pos++:this.focus_pos=0,n=!0;break;case"ArrowLeft":case"Left":case"ArrowUp":case"Up":this.focus_pos>0?this.focus_pos--:this.focus_pos=this.focus_end,n=!0;break;case" ":case"Spacebar":e.preventDefault();case"Enter":this.clickEvent===!0&&(t.click(),n=!0)}else if(void 0!==e.keyCode)switch(e.keyCode){case"39":case"40":this.focus_pos<this.focus_end?this.focus_pos++:this.focus_pos=0,n=!0;break;case"37":case"38":this.focus_pos>0?this.focus_pos--:this.focus_pos=this.focus_end,n=!0;break;case"32":e.preventDefault();case"13":this.clickEvent===!0&&(t.click(),n=!0)}if(n){var o=this.focusable[this.focus_pos];o.focus(),e.preventDefault()}}}},resizeQuery=function(){function e(){for(var e=0;e<n.length;e++)if(1==Modernizr.mq(n[e]))return n[e]}function t(e,t){if("function"==typeof e[t])return e[t]()}var n=["(max-width: 768px)","(max-width: 1024px)","(min-width: 1024px) and (max-width: 1324px)","(min-width: 1324px)"],o=e(),i=function(n,i){var a=o;i&&t(n,o),window.onresize=function(){var o=e();o!=a&&(t(n,o),n["(all)"]&&t(n,"(all)"),a=o)}};return i}(),layoutControl=function(e){function t(e){var t=document.querySelector(e);if(null!=t){var n=t.parentNode;null!=n&&n.removeChild(t)}}var n={body:{modal:function(){addClass(this,"modal")},select:function(){removeClass(this,"modal")}},main:{modal:function(){addClass(this,"fade")},select:function(){removeClass(this,"fade")}},nav:{modal:function(){this.style.display="none"},select:function(){this.style.display="block"}},"#selector":{modal:function(e){this.style.display="none"},select:function(e){this.style.display="block"}},"#modal":{modal:null,select:function(){t("#modal"),t("#backcanvas")}},"#content":{modal:function(){this.scrollTop>0,this.scrollTop=0},select:null}};return{selectorState:function(e,t,o){function i(e){e===!0&&buildSelector(t,o),s("select")}function a(){s("modal")}function s(e){for(selector in n){var t=document.querySelector(selector);null!=t&&"function"==typeof n[selector][e]&&n[selector][e].call(t,o)}}e===!0?i(null!=t?!0:!1):a()},removeElement:function(e){t(e)}}}();$(function(){function e(){var e=n("nav");a=e,layoutControl.selectorState(!0,s[a],l)}function t(e,t){if(null!=e){var n=document.querySelector("main .content."+e);removeClass(n,"active")}var o=document.querySelector("main .content."+t);addClass(o,"active")}function n(e,t){var n=document.querySelector(e+" .active");return null!=n&&(t===!0&&removeClass(n,"active"),n.id)}function o(){r||(r=setTimeout(function(){r=null,i()},66))}function i(){layoutControl.selectorState(!0,s[a],l)}var a,s,r,l,c,d={"(max-width: 768px)":function(){l="mobile",c=void 0},"(max-width: 1024px)":function(){l="desktop",c=dragScroll("#content",!0)},"(min-width: 1024px) and (max-width: 1324px)":function(){l="desktop",c=dragScroll("#content",!0)},"(min-width: 1324px)":function(){l="desktop",c=dragScroll("#content",!0)},"(all)":function(){}};resizeQuery(d,!0),$.getJSON("assets/data/data.json").done(function(t){s=t,e()}).fail(function(){console.log("error")});for(var u=document.querySelectorAll("nav a"),f=0;f<u.length;f++)u[f].addEventListener("click",function(e){a=this.id;var o=n("nav",!0);addClass(this,"active"),t(o,a),"contact"==a?layoutControl.removeElement("#selector"):layoutControl.selectorState(!0,s[a],l)},!1);window.addEventListener("resize",o,!1);var h=(keyFocus("#nav"),document.querySelector("body"));h.addEventListener("keydown",function(e){if("Tab"==e.key||" "==e.key||"Enter"==e.key){var t=["INPUT","SELECT","TEXTAREA"];t.indexOf(document.activeElement.tagName)!=-1==!1&&addClass(h,"tabstyles")}},!1)}),$(function(){!function(){var e=bowser;if("Safari"==e.name&&"5.1"==e.version){var t=document.querySelector(".logo img"),n=rewriteExtension(t.src,".svg",".png");n!==!1&&(t.src=n)}}()});